<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="manifest" href="/favicons/site.webmanifest"/><link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#000000"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><meta name="theme-color" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><meta name="description" content="Thoughts on our awesome collective web platform."/><meta property="og:image" content="https://og-image.vercel.app/Next.js%20Blog%20Starter%20Example.png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><title>Generating UUID&#x27;s in the Browser | Make Devs</title><meta property="og:image" content="/img/cover.jpg"/><meta name="next-head-count" content="16"/><link rel="preload" href="/log/_next/static/css/0dff263c2b12f909.css" as="style"/><link rel="stylesheet" href="/log/_next/static/css/0dff263c2b12f909.css" data-n-g=""/><link rel="preload" href="/log/_next/static/css/cf121497002c184d.css" as="style"/><link rel="stylesheet" href="/log/_next/static/css/cf121497002c184d.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/log/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/log/_next/static/chunks/webpack-c6d930e7ce3de825.js" defer=""></script><script src="/log/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/log/_next/static/chunks/main-b58ac34e0b98c3ee.js" defer=""></script><script src="/log/_next/static/chunks/pages/_app-90e414d931afb8eb.js" defer=""></script><script src="/log/_next/static/chunks/893-bb16ac16a245221e.js" defer=""></script><script src="/log/_next/static/chunks/349-6549a57f16834f01.js" defer=""></script><script src="/log/_next/static/chunks/pages/posts/%5Bslug%5D-526ce38baf3fe719.js" defer=""></script><script src="/log/_next/static/wRlSiMmk5T1YRpYSSlz3o/_buildManifest.js" defer=""></script><script src="/log/_next/static/wRlSiMmk5T1YRpYSSlz3o/_ssgManifest.js" defer=""></script><script src="/log/_next/static/wRlSiMmk5T1YRpYSSlz3o/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="min-h-screen"><main><div class="container mx-auto px-5"><h2 class="text-2xl md:text-4xl font-bold tracking-tight md:tracking-tighter leading-tight mb-20 mt-8"><a class="hover:underline" href="/log">Make üèóÔ∏è Devs</a></h2><article class="mb-32"><div class="-mb-36 md:-mb-36 sm:-mx-8"><div class="sm:mx-0"><img src="/img/cover.jpg" alt="Cover Image for Generating UUID&#x27;s in the Browser" class="responsive shadow-sm" width="310" height="160"/></div></div><h1 class="text-4xl md:text-5xl lg:text-6xl font-bold tracking-tighter leading-tight md:leading-none mb-12 text-center" style="transform:translateZ(0);background-image:radial-gradient(white 30%, transparent 50%)">Generating UUID&#x27;s in the Browser</h1><div class="mb-6 text-lg flex justify-around" style="transform:translateZ(0)"><time dateTime="2021-01-19T12:32:07.322Z">January	19, 2021</time><div class="flex items-center"><img src="/authors/jj.jpeg" class="w-12 h-12 rounded-full mr-4" alt="Jamie Vaughn"/><div class="text-xl font-bold">Jamie Vaughn</div></div></div><div class="max-w-2xl mx-auto"><div class="markdown-styles_markdown__h_8de"><p>Sometimes there is a need to generate an id for objects created in the browser. Simply using an index or a number generated from <code>Math.random()</code> does not ensure an adequate level of uniqueness. What is really needed is a Universally Unique IDentifier (UUID). A UUID is a special id that garauntees uniqueness across all space and time.</p>
<blockquote>
<p>A UUID is 128 bits long, and can guarantee uniqueness across space and time. UUIDs were originally used in the Apollo Network Computing System and later in the Open Software Foundation's (OSF) Distributed Computing Environment (DCE), and then in Microsoft Windows platforms.</p>
</blockquote>
<p><a href="https://tools.ietf.org/html/rfc4122">source</a></p>
<p>There is a specification for the File API in the browser that generates UUID's according to the above requirements which ensures universal uniqueness. The browsers use it when creating <code>blob</code> for naming URLs for file resource locations.</p>
<p>It generates a URL that contains a UUID as part of the string as specificed in the File API spcification on <a href="https://w3c.github.io/FileAPI/#unicodeBlobURL">step 9 of the procedure for generating a new blob URL</a>.</p>
<blockquote>
<p>An example of a blob URL that can be generated by this algorithm is blob:https://example.org/40a5fb5a-d56d-4a33-b4e2-0acf6a8e5f641.</p>
</blockquote>
<p>With a tiny bit of cleverness, we can leverage that feature ourselves to use it for generating UUIDs as IDs for our own objects. And it can be done with a very terse function as well!</p>
<h2>First, Let's See It In Action!</h2>
<p>Click the button to generate a UUID</p>
<p>GenUUID</p>
<h2>The Implementation</h2>
<p>The implementation depends on instantiating a <code>new Blob()</code> and then passing that to the browser API <code>URL.createObjectURL()</code>. That will generate a url with a UUID in it, as seen previously. We can then use some string and array manipulation to extract out just the UUID from the URL.</p>
<pre><code class="language-js">// create the URL
URL.createObjectURL(new Blob());
// output: 'blob:https://example.org/40a5fb5a-d56d-4a33-b4e2-0acf6a8e5f641'
</code></pre>
<p>So to grab just the UUID from the end of that blob we can use the split method. If we split the string on the <code>/</code> character then it will always create an array of 4 elements with the element at position <code>3</code> containing the UUID that we are after:</p>
<pre><code class="language-js">URL.createObjectURL(new Blob()).split(&quot;/&quot;)[3];
// output: '40a5fb5a-d56d-4a33-b4e2-0acf6a8e5f641'
</code></pre>
<p>To avoid memory leaks we will also want to be sure to call <code>URL.revokeObjectURL</code> and pass it a reference to the URL blob we created.</p>
<p>Let's see how it looks packaged up into a reusable function:</p>
<pre><code class="language-js">const uuid = () =&gt; {
  let url = URL.createObjectURL(new Blob());
  URL.revokeObjectURL(url);
  return url.split(&quot;/&quot;)[3];
};
</code></pre>
<p>For fun, we could play some &quot;code golf&quot; with it and shorten that function up a bit more:</p>
<pre><code class="language-js">const uuid = (url = URL.createObjectURL(new Blob())) =&gt;
  URL.revokeObjectURL(url) || url.split(&quot;/&quot;)[3];
</code></pre>
<p>Just make sure to invoke that function with no parameters passed so the default value is used for the <code>url</code> parameter. Also note that the <code>URL.createObjectURL</code> API is available in Web Workers (but not in Service Workers).</p>
</div></div></article></div><div class="text-center text-2xl my-16 underline"><a href="/log/posts">Read Another!</a></div></main></div><footer class="relative bg-accent-1 border-t border-accent-2"><div class="container mx-auto px-5"><div class="py-12 flex flex-col lg:flex-row items-center"><h3 class="text-4xl lg:text-5xl font-bold tracking-tighter leading-tight text-center lg:text-left mb-10 lg:mb-0 lg:pr-4 lg:w-1/2">Make üèóÔ∏è Devs</h3><div class="flex flex-col lg:flex-row justify-end items-center lg:pl-4 lg:w-1/2"><a href="https://wjv.io" class="mx-3 bg-black hover:bg-white hover:text-black border border-black text-white font-bold py-2 px-8 lg:px-8 duration-200 transition-colors mb-6 lg:mb-0">Portfolio</a><a href="https://github.com/JamieVaughn/log" class="mx-3 font-bold hover:underline">View on GitHub</a></div></div></div><span class="absolute bottom-1 right-2">graphics from <span class="underline"><a href="https://designs.ai/graphicmaker">designs.ai</a></span></span></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Generating UUID's in the Browser","date":"2021-01-19T12:32:07.322Z","slug":"uuids","author":{"name":"Jamie Vaughn","picture":"/authors/jj.jpeg"},"content":"\u003cp\u003eSometimes there is a need to generate an id for objects created in the browser. Simply using an index or a number generated from \u003ccode\u003eMath.random()\u003c/code\u003e does not ensure an adequate level of uniqueness. What is really needed is a Universally Unique IDentifier (UUID). A UUID is a special id that garauntees uniqueness across all space and time.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eA UUID is 128 bits long, and can guarantee uniqueness across space and time. UUIDs were originally used in the Apollo Network Computing System and later in the Open Software Foundation's (OSF) Distributed Computing Environment (DCE), and then in Microsoft Windows platforms.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003ca href=\"https://tools.ietf.org/html/rfc4122\"\u003esource\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eThere is a specification for the File API in the browser that generates UUID's according to the above requirements which ensures universal uniqueness. The browsers use it when creating \u003ccode\u003eblob\u003c/code\u003e for naming URLs for file resource locations.\u003c/p\u003e\n\u003cp\u003eIt generates a URL that contains a UUID as part of the string as specificed in the File API spcification on \u003ca href=\"https://w3c.github.io/FileAPI/#unicodeBlobURL\"\u003estep 9 of the procedure for generating a new blob URL\u003c/a\u003e.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eAn example of a blob URL that can be generated by this algorithm is blob:https://example.org/40a5fb5a-d56d-4a33-b4e2-0acf6a8e5f641.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eWith a tiny bit of cleverness, we can leverage that feature ourselves to use it for generating UUIDs as IDs for our own objects. And it can be done with a very terse function as well!\u003c/p\u003e\n\u003ch2\u003eFirst, Let's See It In Action!\u003c/h2\u003e\n\u003cp\u003eClick the button to generate a UUID\u003c/p\u003e\n\u003cp\u003eGenUUID\u003c/p\u003e\n\u003ch2\u003eThe Implementation\u003c/h2\u003e\n\u003cp\u003eThe implementation depends on instantiating a \u003ccode\u003enew Blob()\u003c/code\u003e and then passing that to the browser API \u003ccode\u003eURL.createObjectURL()\u003c/code\u003e. That will generate a url with a UUID in it, as seen previously. We can then use some string and array manipulation to extract out just the UUID from the URL.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-js\"\u003e// create the URL\nURL.createObjectURL(new Blob());\n// output: 'blob:https://example.org/40a5fb5a-d56d-4a33-b4e2-0acf6a8e5f641'\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSo to grab just the UUID from the end of that blob we can use the split method. If we split the string on the \u003ccode\u003e/\u003c/code\u003e character then it will always create an array of 4 elements with the element at position \u003ccode\u003e3\u003c/code\u003e containing the UUID that we are after:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-js\"\u003eURL.createObjectURL(new Blob()).split(\u0026quot;/\u0026quot;)[3];\n// output: '40a5fb5a-d56d-4a33-b4e2-0acf6a8e5f641'\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTo avoid memory leaks we will also want to be sure to call \u003ccode\u003eURL.revokeObjectURL\u003c/code\u003e and pass it a reference to the URL blob we created.\u003c/p\u003e\n\u003cp\u003eLet's see how it looks packaged up into a reusable function:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-js\"\u003econst uuid = () =\u0026gt; {\n  let url = URL.createObjectURL(new Blob());\n  URL.revokeObjectURL(url);\n  return url.split(\u0026quot;/\u0026quot;)[3];\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eFor fun, we could play some \u0026quot;code golf\u0026quot; with it and shorten that function up a bit more:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-js\"\u003econst uuid = (url = URL.createObjectURL(new Blob())) =\u0026gt;\n  URL.revokeObjectURL(url) || url.split(\u0026quot;/\u0026quot;)[3];\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eJust make sure to invoke that function with no parameters passed so the default value is used for the \u003ccode\u003eurl\u003c/code\u003e parameter. Also note that the \u003ccode\u003eURL.createObjectURL\u003c/code\u003e API is available in Web Workers (but not in Service Workers).\u003c/p\u003e\n","ogImage":{"url":"/img/cover.jpg"},"coverImage":"/img/cover.jpg"}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"uuids"},"buildId":"wRlSiMmk5T1YRpYSSlz3o","assetPrefix":"/log","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>