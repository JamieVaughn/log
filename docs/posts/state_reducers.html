<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="manifest" href="/favicons/site.webmanifest"/><link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#000000"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><meta name="theme-color" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><meta name="description" content="Thoughts on our awesome collective web platform."/><meta property="og:image" content="https://og-image.vercel.app/Next.js%20Blog%20Starter%20Example.png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><title>Simple State Reducer With Objects, Switch-Case &amp; Generators | Make Devs</title><meta property="og:image" content="/img/cover.jpg"/><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/2d0a99b2eed11533.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2d0a99b2eed11533.css" data-n-g=""/><link rel="preload" href="/_next/static/css/cf121497002c184d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/cf121497002c184d.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-9b312e20a4e32339.js" defer=""></script><script src="/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/_next/static/chunks/main-83803dd478f5b5bc.js" defer=""></script><script src="/_next/static/chunks/pages/_app-90e414d931afb8eb.js" defer=""></script><script src="/_next/static/chunks/893-bb16ac16a245221e.js" defer=""></script><script src="/_next/static/chunks/349-6549a57f16834f01.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-af985c9b61d92592.js" defer=""></script><script src="/_next/static/yowVXNgtf480ECDUyIv7v/_buildManifest.js" defer=""></script><script src="/_next/static/yowVXNgtf480ECDUyIv7v/_ssgManifest.js" defer=""></script><script src="/_next/static/yowVXNgtf480ECDUyIv7v/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="min-h-screen"><main><div class="container mx-auto px-5"><h2 class="text-2xl md:text-4xl font-bold tracking-tight md:tracking-tighter leading-tight mb-20 mt-8"><a class="hover:underline" href="/">Make üèóÔ∏è Devs</a></h2><article class="mb-32"><div class="-mb-36 md:-mb-36 sm:-mx-8"><div class="sm:mx-0"><img src="/img/cover.jpg" alt="Cover Image for Simple State Reducer With Objects, Switch-Case &amp; Generators" class="shadow-sm" width="310" height="160"/></div></div><h1 class="text-4xl md:text-5xl lg:text-6xl font-bold tracking-tighter leading-tight md:leading-none mb-12 text-center" style="transform:translateZ(0);background-image:radial-gradient(white 30%, transparent 50%)">Simple State Reducer With Objects, Switch-Case &amp; Generators</h1><div class="mb-6 text-lg flex justify-around" style="transform:translateZ(0)"><time dateTime="2019-12-28T20:47:18.322Z">December	28, 2019</time><div class="flex items-center"><img src="/authors/jj.jpeg" class="w-12 h-12 rounded-full mr-4" alt="Jamie Vaughn"/><div class="text-xl font-bold">Jamie Vaughn</div></div></div><div class="max-w-2xl mx-auto"><div class="markdown-styles_markdown__h_8de"><p>Finite State Machines and State management is now an important part of frontend development. Libraries like Redux, XState and Microstates.js are creeping into wide spread use, especially in the React community. Those libraries provide a robust and complex solution to state management and are well suited to production applications. But for learning the concept of State Reducers and Finite State Management let's build a super simple <strong>State Reducer</strong> in three different ways:</p>
<ul>
<li>Object Lookup-Table</li>
<li>Switch-Case statement</li>
<li>Generator function</li>
</ul>
<p>A state reducer takes in a state and an action and returns a new state in a deterministic fashion. It's referred to as a reducer because it reduces two inputs into a single state as an output. The deterministic part of this meshes nicely with functional programming, because it can be expressed with pure functions.</p>
<h2>Object Lookup-Table</h2>
<p>The lookup-table provides an easy way to map a state value to an enum by way of a key in an object. It can also serve as something like a Class, since various methods can be attached to the object as well (but do not have to be).</p>
<pre><code class="language-js">const stateReducer = {
  current: &quot;red&quot;,
  red: &quot;green&quot;,
  yellow: &quot;red&quot;,
  green: &quot;yellow&quot;,
  next: function () {
    this.current = this[this.current];
  },
  getState: function () {
    console.log(this.current);
  },
};
</code></pre>
<h2>Switch-Case Statement</h2>
<p>The swtch statement is the go-to reducer pattern in the React-Redux world. It's very straight forward and also at least as powerful as the lookup-table. In certain cases, it can be more flexible and powerful than the lookup-table. It is not as concise, though and can't contain related methods within it. When inside a function the new state string can be returned instead of reassigned.</p>
<pre><code class="language-js">switch (action) {
  case &quot;red&quot;:
    state = &quot;green&quot;;
    break;
  case &quot;yellow&quot;:
    state = &quot;red&quot;;
    break;
  case &quot;green&quot;:
    state = &quot;yellow&quot;;
    break;
  default:
    state = &quot;green&quot;;
    break;
}
</code></pre>
<h2>Generator Function</h2>
<p>The generator function can also be used as a reducer, although it rarely is since it is quite new to Javascript. A perpetual <code>while</code> loop can be used to make the generator continuously yield state values.</p>
<pre><code class="language-js">function* stateReducer(state) {
  let states = [&quot;green&quot;, &quot;yellow&quot;, &quot;red&quot;];
  let nextState = (states.indexOf(state) + 1) % 3;
  while (states.includes(state)) {
    yield states[nextState];
  }
  yield state; // a default state return value
}

stateReducer(&quot;green&quot;).next(); // {value: &quot;yellow&quot;, done: false}
</code></pre>
<h2>Action Routers</h2>
<p>All of these approaches simply map an action type to an execution block (i.e. a function) with a predetermined set of logic. This is similar to a page router, which determines what content to dispay on the page (a.k.a. &quot;state&quot;) given a particular URL query string or path. We can think of this pattern as a &quot;Action Router&quot; since it maps particular action objects, enums or strings to a given function, which determines the next application state. In fact, the concept of a page router and a state reducer are not just &quot;similar&quot; they are pretty much the same. A page router controls the whole page and is inextricably linked to the URL string state, while the state reducer controls some object's state in memory, which may impact potentially the whole page or merely a bit of information in the background. There is no necessary specification or ceremony around the state object, like there is around the URL, but state management libraries like Redux do introduce and enforce some level of convention to make things more consistent when interacting with the state object (a.k.a. the <code>store</code>).</p>
</div></div></article></div><div class="text-center text-2xl my-16 underline"><a href="/posts">Read Another!</a></div></main></div><footer class="relative bg-accent-1 border-t border-accent-2"><div class="container mx-auto px-5"><div class="py-12 flex flex-col lg:flex-row items-center"><h3 class="text-4xl lg:text-5xl font-bold tracking-tighter leading-tight text-center lg:text-left mb-10 lg:mb-0 lg:pr-4 lg:w-1/2">Make üèóÔ∏è Devs</h3><div class="flex flex-col lg:flex-row justify-end items-center lg:pl-4 lg:w-1/2"><a href="https://wjv.io" class="mx-3 bg-black hover:bg-white hover:text-black border border-black text-white font-bold py-2 px-8 lg:px-8 duration-200 transition-colors mb-6 lg:mb-0">Portfolio</a><a href="https://github.com/JamieVaughn/log" class="mx-3 font-bold hover:underline">View on GitHub</a></div></div></div><span class="absolute bottom-1 right-2">graphics from <span class="underline"><a href="https://designs.ai/graphicmaker">designs.ai</a></span></span></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Simple State Reducer With Objects, Switch-Case \u0026 Generators","date":"2019-12-28T20:47:18.322Z","slug":"state_reducers","author":{"name":"Jamie Vaughn","picture":"/authors/jj.jpeg"},"content":"\u003cp\u003eFinite State Machines and State management is now an important part of frontend development. Libraries like Redux, XState and Microstates.js are creeping into wide spread use, especially in the React community. Those libraries provide a robust and complex solution to state management and are well suited to production applications. But for learning the concept of State Reducers and Finite State Management let's build a super simple \u003cstrong\u003eState Reducer\u003c/strong\u003e in three different ways:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eObject Lookup-Table\u003c/li\u003e\n\u003cli\u003eSwitch-Case statement\u003c/li\u003e\n\u003cli\u003eGenerator function\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eA state reducer takes in a state and an action and returns a new state in a deterministic fashion. It's referred to as a reducer because it reduces two inputs into a single state as an output. The deterministic part of this meshes nicely with functional programming, because it can be expressed with pure functions.\u003c/p\u003e\n\u003ch2\u003eObject Lookup-Table\u003c/h2\u003e\n\u003cp\u003eThe lookup-table provides an easy way to map a state value to an enum by way of a key in an object. It can also serve as something like a Class, since various methods can be attached to the object as well (but do not have to be).\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-js\"\u003econst stateReducer = {\n  current: \u0026quot;red\u0026quot;,\n  red: \u0026quot;green\u0026quot;,\n  yellow: \u0026quot;red\u0026quot;,\n  green: \u0026quot;yellow\u0026quot;,\n  next: function () {\n    this.current = this[this.current];\n  },\n  getState: function () {\n    console.log(this.current);\n  },\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eSwitch-Case Statement\u003c/h2\u003e\n\u003cp\u003eThe swtch statement is the go-to reducer pattern in the React-Redux world. It's very straight forward and also at least as powerful as the lookup-table. In certain cases, it can be more flexible and powerful than the lookup-table. It is not as concise, though and can't contain related methods within it. When inside a function the new state string can be returned instead of reassigned.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-js\"\u003eswitch (action) {\n  case \u0026quot;red\u0026quot;:\n    state = \u0026quot;green\u0026quot;;\n    break;\n  case \u0026quot;yellow\u0026quot;:\n    state = \u0026quot;red\u0026quot;;\n    break;\n  case \u0026quot;green\u0026quot;:\n    state = \u0026quot;yellow\u0026quot;;\n    break;\n  default:\n    state = \u0026quot;green\u0026quot;;\n    break;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eGenerator Function\u003c/h2\u003e\n\u003cp\u003eThe generator function can also be used as a reducer, although it rarely is since it is quite new to Javascript. A perpetual \u003ccode\u003ewhile\u003c/code\u003e loop can be used to make the generator continuously yield state values.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-js\"\u003efunction* stateReducer(state) {\n  let states = [\u0026quot;green\u0026quot;, \u0026quot;yellow\u0026quot;, \u0026quot;red\u0026quot;];\n  let nextState = (states.indexOf(state) + 1) % 3;\n  while (states.includes(state)) {\n    yield states[nextState];\n  }\n  yield state; // a default state return value\n}\n\nstateReducer(\u0026quot;green\u0026quot;).next(); // {value: \u0026quot;yellow\u0026quot;, done: false}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eAction Routers\u003c/h2\u003e\n\u003cp\u003eAll of these approaches simply map an action type to an execution block (i.e. a function) with a predetermined set of logic. This is similar to a page router, which determines what content to dispay on the page (a.k.a. \u0026quot;state\u0026quot;) given a particular URL query string or path. We can think of this pattern as a \u0026quot;Action Router\u0026quot; since it maps particular action objects, enums or strings to a given function, which determines the next application state. In fact, the concept of a page router and a state reducer are not just \u0026quot;similar\u0026quot; they are pretty much the same. A page router controls the whole page and is inextricably linked to the URL string state, while the state reducer controls some object's state in memory, which may impact potentially the whole page or merely a bit of information in the background. There is no necessary specification or ceremony around the state object, like there is around the URL, but state management libraries like Redux do introduce and enforce some level of convention to make things more consistent when interacting with the state object (a.k.a. the \u003ccode\u003estore\u003c/code\u003e).\u003c/p\u003e\n","ogImage":{"url":"/img/cover.jpg"},"coverImage":"/img/cover.jpg"}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"state_reducers"},"buildId":"yowVXNgtf480ECDUyIv7v","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>